#[hengo] {"comments":[{"cnode_inside_ids":[253,254,256,257,465,1198,1212,1213],"color":"Color(0.212646, 0.220314, 0.261719, 1)","comment":"Grab box","id":2226403749980,"is_pinned":true,"pos":"Vector2(-1354.95, 5968.07)","router_ref_id":3,"size":"Vector2(1232.9, 638.58)"},{"cnode_inside_ids":[340,342,344,345,347,348,354,466,1199,1214,1215],"color":"Color(0.184943, 0.16983, 0.207031, 1)","comment":"Shoot","id":2227813036190,"is_pinned":true,"pos":"Vector2(-1597.69, 6629.51)","router_ref_id":3,"size":"Vector2(1513.28, 978.64)"},{"cnode_inside_ids":[18,21,24,25,1194,1207],"color":"Color(0.195313, 0.195313, 0.14801, 1)","comment":"Calculating direction","id":2229020995792,"is_pinned":true,"pos":"Vector2(-2344.24, 1356.97)","router_ref_id":3,"size":"Vector2(1409.04, 266.53)"},{"cnode_inside_ids":[28,29,37,38,72,1202],"color":"Color(0.138092, 0.195313, 0.187266, 1)","comment":"Move character","id":2230027628804,"is_pinned":true,"pos":"Vector2(-951.079, 1630.98)","router_ref_id":3,"size":"Vector2(869.753, 480.03)"},{"cnode_inside_ids":[39,41,42,43,45,1203],"color":"Color(0.188998, 0.187807, 0.177515, 1)","comment":"Gravity","id":2231034261815,"is_pinned":true,"pos":"Vector2(320.231, 1689.07)","router_ref_id":3,"size":"Vector2(929.573, 516.63)"},{"cnode_inside_ids":[211,212,213,222,223,853,1193,1197,1216,1217],"color":"Color(0.188998, 0.187807, 0.177515, 1)","comment":"Setting head movment","id":2232040894826,"is_pinned":true,"pos":"Vector2(-914.226, 3774.82)","router_ref_id":3,"size":"Vector2(1187.47, 1005.73)"},{"cnode_inside_ids":[1087,1088,1089,1120,1122,1201],"color":"Color(0.188998, 0.187807, 0.177515, 1)","comment":"BUG - (expression need to ignore native word)","id":2517303882926,"is_pinned":true,"pos":"Vector2(-619.829, 9005.57)","router_ref_id":3,"size":"Vector2(673.1, 522.63)"}],"connections":[{"from_cnode":75,"input":0,"output":0,"to_cnode":74},{"from_cnode":1195,"input":0,"output":0,"to_cnode":77},{"from_cnode":1,"input":0,"output":0,"to_cnode":78},{"from_cnode":78,"input":0,"output":0,"to_cnode":79},{"from_cnode":79,"input":0,"output":0,"to_cnode":80},{"from_cnode":1196,"input":0,"output":0,"to_cnode":84},{"from_cnode":79,"input":0,"output":0,"to_cnode":85},{"from_cnode":80,"input":0,"output":0,"to_cnode":701},{"from_cnode":1208,"input":0,"output":1,"to_cnode":701},{"from_cnode":701,"input":0,"output":1,"to_cnode":77},{"from_cnode":85,"input":0,"output":0,"to_cnode":731},{"from_cnode":1208,"input":0,"output":1,"to_cnode":731},{"from_cnode":731,"input":0,"output":1,"to_cnode":84},{"from_cnode":7,"input":0,"output":0,"to_cnode":8},{"from_cnode":1194,"input":0,"output":0,"to_cnode":18},{"from_cnode":21,"input":0,"output":0,"to_cnode":24},{"from_cnode":24,"input":0,"output":0,"to_cnode":25},{"from_cnode":25,"input":0,"output":0,"to_cnode":27},{"from_cnode":29,"input":0,"output":2,"to_cnode":28},{"from_cnode":1202,"input":0,"output":1,"to_cnode":29},{"from_cnode":27,"input":0,"output":0,"to_cnode":26},{"from_cnode":1206,"input":0,"output":0,"to_cnode":32},{"from_cnode":1206,"input":0,"output":0,"to_cnode":33},{"from_cnode":16,"input":0,"output":0,"to_cnode":34},{"from_cnode":34,"input":0,"output":1,"to_cnode":32},{"from_cnode":16,"input":0,"output":0,"to_cnode":35},{"from_cnode":35,"input":0,"output":1,"to_cnode":33},{"from_cnode":25,"input":0,"output":0,"to_cnode":37},{"from_cnode":37,"input":0,"output":0,"to_cnode":38},{"from_cnode":1202,"input":0,"output":1,"to_cnode":38},{"from_cnode":38,"input":0,"output":4,"to_cnode":28},{"from_cnode":42,"input":0,"output":2,"to_cnode":39},{"from_cnode":41,"input":1,"output":0,"to_cnode":42},{"from_cnode":1203,"input":0,"output":0,"to_cnode":43},{"from_cnode":43,"input":0,"output":2,"to_cnode":42},{"from_cnode":41,"input":3,"output":0,"to_cnode":45},{"from_cnode":43,"input":0,"output":2,"to_cnode":45},{"from_cnode":45,"input":0,"output":4,"to_cnode":39},{"from_cnode":60,"input":0,"output":0,"to_cnode":61},{"from_cnode":25,"input":0,"output":0,"to_cnode":72},{"from_cnode":72,"input":0,"output":0,"to_cnode":29},{"from_cnode":1207,"input":0,"output":1,"to_cnode":21},{"from_cnode":18,"input":1,"output":0,"to_cnode":21},{"from_cnode":106,"input":0,"output":0,"to_cnode":105},{"from_cnode":211,"input":0,"output":0,"to_cnode":212},{"from_cnode":1197,"input":0,"output":0,"to_cnode":222},{"from_cnode":1193,"input":0,"output":3,"to_cnode":222},{"from_cnode":1216,"input":0,"output":0,"to_cnode":1193},{"from_cnode":1216,"input":0,"output":0,"to_cnode":223},{"from_cnode":245,"input":0,"output":0,"to_cnode":244},{"from_cnode":248,"input":0,"output":0,"to_cnode":247},{"from_cnode":250,"input":0,"output":0,"to_cnode":1211},{"from_cnode":1212,"input":0,"output":0,"to_cnode":253},{"from_cnode":253,"input":0,"output":0,"to_cnode":251},{"from_cnode":1198,"input":0,"output":0,"to_cnode":256},{"from_cnode":1212,"input":0,"output":0,"to_cnode":257},{"from_cnode":1213,"input":0,"output":0,"to_cnode":254},{"from_cnode":340,"input":0,"output":0,"to_cnode":341},{"from_cnode":344,"input":0,"output":0,"to_cnode":342},{"from_cnode":1214,"input":0,"output":0,"to_cnode":344},{"from_cnode":1214,"input":0,"output":0,"to_cnode":345},{"from_cnode":1199,"input":0,"output":0,"to_cnode":347},{"from_cnode":347,"input":1,"output":0,"to_cnode":348},{"from_cnode":354,"input":0,"output":0,"to_cnode":1215},{"from_cnode":356,"input":0,"output":0,"to_cnode":355},{"from_cnode":360,"input":0,"output":0,"to_cnode":361},{"from_cnode":362,"input":0,"output":1,"to_cnode":361},{"from_cnode":361,"input":0,"output":0,"to_cnode":359},{"from_cnode":362,"input":0,"output":0,"to_cnode":357},{"from_cnode":358,"input":0,"output":0,"to_cnode":363},{"from_cnode":11,"input":0,"output":0,"to_cnode":429},{"from_cnode":3,"input":0,"output":1,"to_cnode":429},{"from_cnode":15,"input":0,"output":2,"to_cnode":429},{"from_cnode":429,"input":0,"output":1,"to_cnode":9},{"from_cnode":429,"input":0,"output":0,"to_cnode":462},{"from_cnode":61,"input":0,"output":0,"to_cnode":463},{"from_cnode":463,"input":0,"output":0,"to_cnode":59},{"from_cnode":256,"input":2,"output":0,"to_cnode":465},{"from_cnode":254,"input":2,"output":1,"to_cnode":465},{"from_cnode":465,"input":0,"output":1,"to_cnode":257},{"from_cnode":348,"input":0,"output":0,"to_cnode":466},{"from_cnode":466,"input":0,"output":1,"to_cnode":345},{"from_cnode":212,"input":0,"output":1,"to_cnode":853},{"from_cnode":3,"input":0,"output":0,"to_cnode":853},{"from_cnode":213,"input":0,"output":2,"to_cnode":853},{"from_cnode":1216,"input":0,"output":3,"to_cnode":853},{"from_cnode":853,"input":0,"output":0,"to_cnode":1217},{"from_cnode":1087,"input":0,"output":0,"to_cnode":1086},{"from_cnode":1088,"input":0,"output":2,"to_cnode":1087},{"from_cnode":1089,"input":0,"output":3,"to_cnode":1087},{"from_cnode":1201,"input":0,"output":0,"to_cnode":1120},{"from_cnode":1120,"input":0,"output":0,"to_cnode":1087},{"from_cnode":1122,"input":0,"output":1,"to_cnode":1087},{"from_cnode":1153,"input":0,"output":0,"to_cnode":1154},{"from_cnode":1154,"input":0,"output":0,"to_cnode":1155},{"from_cnode":1155,"input":0,"output":0,"to_cnode":1156},{"from_cnode":1219,"input":0,"output":1,"to_cnode":1156},{"from_cnode":1155,"input":0,"output":0,"to_cnode":1190},{"from_cnode":1218,"input":0,"output":1,"to_cnode":1190},{"from_cnode":119,"input":0,"output":0,"to_cnode":120},{"from_cnode":120,"input":0,"output":0,"to_cnode":121},{"from_cnode":121,"input":0,"output":0,"to_cnode":123},{"from_cnode":125,"input":0,"output":0,"to_cnode":124},{"from_cnode":143,"input":0,"output":0,"to_cnode":142},{"from_cnode":148,"input":0,"output":0,"to_cnode":149},{"from_cnode":149,"input":0,"output":0,"to_cnode":428},{"from_cnode":428,"input":0,"output":0,"to_cnode":152},{"from_cnode":1209,"input":0,"output":3,"to_cnode":111},{"from_cnode":114,"input":0,"output":0,"to_cnode":427},{"from_cnode":427,"input":0,"output":0,"to_cnode":113},{"from_cnode":461,"input":0,"output":1,"to_cnode":427},{"from_cnode":156,"input":0,"output":0,"to_cnode":155},{"from_cnode":1200,"input":0,"output":0,"to_cnode":174},{"from_cnode":174,"input":0,"output":0,"to_cnode":176},{"from_cnode":177,"input":0,"output":1,"to_cnode":176},{"from_cnode":176,"input":0,"output":0,"to_cnode":175},{"from_cnode":174,"input":0,"output":0,"to_cnode":182},{"from_cnode":182,"input":0,"output":0,"to_cnode":1210},{"from_cnode":1220,"input":0,"output":0,"to_cnode":187},{"from_cnode":207,"input":0,"output":0,"to_cnode":1222},{"from_cnode":1220,"input":0,"output":0,"to_cnode":186},{"from_cnode":1221,"input":0,"output":0,"to_cnode":184},{"from_cnode":183,"input":0,"output":0,"to_cnode":430},{"from_cnode":430,"input":0,"output":1,"to_cnode":187},{"from_cnode":431,"input":0,"output":1,"to_cnode":186},{"from_cnode":183,"input":0,"output":0,"to_cnode":431}],"debug_symbols":{"1024":[342,"true_flow"],"1048576":[247,"then_flow"],"1073741824":[175,"true_flow"],"1099511627776":[152,"true_flow"],"1125899906842624":[146,"cnode"],"128":[244,"true_flow"],"131072":[355,"then_flow"],"134217728":[8,"false_flow"],"137438953472":[57,"cnode"],"140737488355328":[145,"cnode"],"16":[59,"true_flow"],"16384":[355,"true_flow"],"16777216":[26,"then_flow"],"17179869184":[124,"true_flow"],"17592186044416":[108],"2":[74,"true_flow"],"2048":[341,"true_flow"],"2097152":[244,"then_flow"],"2147483648":[171,"cnode"],"2199023255552":[142,"then_flow"],"256":[247,"true_flow"],"262144":[341,"then_flow"],"268435456":[3,"cnode"],"274877906944":[56],"281474976710656":[144],"32":[105,"true_flow"],"32768":[1086,"true_flow"],"33554432":[26,"false_flow"],"34359738368":[123,"true_flow"],"35184372088832":[113,"true_flow"],"4":[1,"cnode"],"4096":[359,"true_flow"],"4194304":[105,"then_flow"],"4294967296":[183,"cnode"],"4398046511104":[58,"cnode"],"512":[251,"true_flow"],"524288":[251,"then_flow"],"536870912":[4],"549755813888":[142,"true_flow"],"562949953421312":[155,"true_flow"],"64":[223],"65536":[1086,"false_flow"],"67108864":[8,"then_flow"],"68719476736":[6,"cnode"],"70368744177664":[110,"cnode"],"8":[26,"true_flow"],"8192":[359,"false_flow"],"8388608":[59,"then_flow"],"8589934592":[4],"8796093022208":[109,"cnode"]},"flow_connections":[{"from_cnode":74,"from_connector":0,"to_cnode":77},{"from_cnode":77,"from_connector":0,"to_cnode":84},{"from_cnode":1,"from_connector":0,"to_cnode":74},{"from_cnode":8,"from_connector":2,"to_cnode":9},{"from_cnode":26,"from_connector":0,"to_cnode":28},{"from_cnode":32,"from_connector":0,"to_cnode":33},{"from_cnode":8,"from_connector":1,"to_cnode":32},{"from_cnode":26,"from_connector":2,"to_cnode":39},{"from_cnode":59,"from_connector":0,"to_cnode":70},{"from_cnode":59,"from_connector":1,"to_cnode":71},{"from_cnode":71,"from_connector":0,"to_cnode":105},{"from_cnode":105,"from_connector":0,"to_cnode":107},{"from_cnode":105,"from_connector":1,"to_cnode":1217},{"from_cnode":1217,"from_connector":0,"to_cnode":222},{"from_cnode":222,"from_connector":0,"to_cnode":223},{"from_cnode":223,"from_connector":0,"to_cnode":244},{"from_cnode":244,"from_connector":0,"to_cnode":1192},{"from_cnode":244,"from_connector":1,"to_cnode":247},{"from_cnode":247,"from_connector":0,"to_cnode":1211},{"from_cnode":247,"from_connector":1,"to_cnode":251},{"from_cnode":251,"from_connector":0,"to_cnode":257},{"from_cnode":251,"from_connector":1,"to_cnode":341},{"from_cnode":341,"from_connector":0,"to_cnode":342},{"from_cnode":342,"from_connector":0,"to_cnode":345},{"from_cnode":345,"from_connector":0,"to_cnode":1215},{"from_cnode":359,"from_connector":2,"to_cnode":357},{"from_cnode":359,"from_connector":0,"to_cnode":363},{"from_cnode":341,"from_connector":1,"to_cnode":355},{"from_cnode":355,"from_connector":0,"to_cnode":359},{"from_cnode":9,"from_connector":0,"to_cnode":462},{"from_cnode":33,"from_connector":0,"to_cnode":26},{"from_cnode":3,"from_connector":0,"to_cnode":8},{"from_cnode":26,"from_connector":1,"to_cnode":59},{"from_cnode":355,"from_connector":1,"to_cnode":1086},{"from_cnode":1086,"from_connector":0,"to_cnode":1156},{"from_cnode":1086,"from_connector":2,"to_cnode":1190},{"from_cnode":6,"from_connector":0,"to_cnode":123},{"from_cnode":123,"from_connector":0,"to_cnode":124},{"from_cnode":124,"from_connector":0,"to_cnode":140},{"from_cnode":57,"from_connector":0,"to_cnode":1204},{"from_cnode":58,"from_connector":0,"to_cnode":142},{"from_cnode":142,"from_connector":0,"to_cnode":147},{"from_cnode":142,"from_connector":1,"to_cnode":152},{"from_cnode":152,"from_connector":0,"to_cnode":153},{"from_cnode":109,"from_connector":0,"to_cnode":111},{"from_cnode":110,"from_connector":0,"to_cnode":113},{"from_cnode":113,"from_connector":0,"to_cnode":118},{"from_cnode":145,"from_connector":0,"to_cnode":1205},{"from_cnode":146,"from_connector":0,"to_cnode":155},{"from_cnode":155,"from_connector":0,"to_cnode":157},{"from_cnode":171,"from_connector":0,"to_cnode":175},{"from_cnode":175,"from_connector":0,"to_cnode":1210},{"from_cnode":183,"from_connector":0,"to_cnode":1222},{"from_cnode":1222,"from_connector":0,"to_cnode":187},{"from_cnode":187,"from_connector":0,"to_cnode":186}],"func_item_list":[{"cnode_list":[{"hash":174,"inputs":[{"name":"RayCast3D","ref":true,"type":"RayCast3D"}],"name":"get_collider","outputs":[{"name":"","type":"Object"}],"pos":"Vector2(-489.573, 195.513)","sub_type":"func"},{"hash":175,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(136.672, 270.898)","sub_type":"if","type":"if"},{"category":"not_equal","hash":176,"inputs":[{"name":"","type":"Variant"},{"name":"","type":"Variant"}],"name":"!=","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-253.459, 232.571)","sub_type":"img","type":"img"},{"category":"native","hash":177,"inputs":[{"category":"disabled","in_prop":"null","name":"","type":"String"}],"name":"Raw Code","outputs":[{"name":"code","type":"Variant"}],"pos":"Vector2(-465.564, 339.218)","sub_type":"raw_code"},{"category":"native","hash":182,"inputs":[{"name":"from","type":"Variant"}],"name":"Cast To","outputs":[{"category":"cast_type","name":"to","out_prop":"RigidBody3D","sub_type":"@dropdown","type":"RigidBody3D"}],"pos":"Vector2(-254.661, 619.49)","sub_type":"cast"}],"id":2170401400516,"inputs":[],"instances":[{"hash":1192,"id":2196372531902,"pos":"Vector2(-7.02437, 5187.65)","route_inst_id":129,"sub_type":"user_func"}],"name":"pick","outputs":[],"start_data":{"input":{"id":171,"pos":"Vector2(198.882, 53.9341)"},"output":{"id":172,"pos":"Vector2(420.025, 689.243)"}}},{"cnode_list":[{"fantasy_name":"Set Prop -> x","hash":186,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"},{"name":"x","type":"float"}],"name":"x","outputs":[],"pos":"Vector2(-25.2964, 591.307)","sub_type":"set_prop"},{"fantasy_name":"Set Prop -> y","hash":187,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"},{"name":"y","type":"float"}],"name":"y","outputs":[],"pos":"Vector2(-27.3508, 357.923)","sub_type":"set_prop"},{"category":"native","hash":207,"inputs":[],"name":"Vector3","outputs":[{"category":"const","name":"","out_prop":"ZERO","sub_type":"@dropdown","type":"Vector3"}],"pos":"Vector2(-192.955, 168.222)","sub_type":"const"},{"category":"native","exp":"sin(time * 2) * 0.08","hash":430,"inputs":[{"name":"time","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-387.238, 354.402)","sub_type":"expression","type":"expression"},{"category":"native","exp":"cos(time * 2 / 2) * 0.08","hash":431,"inputs":[{"name":"time","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-383.386, 590.425)","sub_type":"expression","type":"expression"}],"id":2179091998811,"inputs":[{"name":"time","type":"float"}],"instances":[{"hash":1193,"id":2196993288929,"pos":"Vector2(-230.39, 4318.53)","route_inst_id":129,"sub_type":"user_func"}],"name":"headpop","outputs":[{"name":"pos","type":"Vector3"}],"start_data":{"input":{"id":183,"pos":"Vector2(-539.871, -23.134)"},"output":{"id":184,"pos":"Vector2(524.352, 609.058)"}}}],"generals":[{"cnode_list":[{"hash":1,"inputs":[],"name":"_input","outputs":[{"name":"event","type":"InputEvent"}],"pos":"Vector2(-1789.07, 67.6218)","sub_type":"virtual"},{"hash":74,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(-54.5311, 253.311)","sub_type":"if","type":"if"},{"category":"native","hash":75,"inputs":[{"category":"disabled","in_prop":"event is InputEventMouseMotion","name":"","type":"String"}],"name":"Raw Code","outputs":[{"name":"code","type":"Variant"}],"pos":"Vector2(-445.543, 222.31)","sub_type":"raw_code"},{"hash":77,"inputs":[{"name":"Node3D","ref":true,"type":"Node3D"},{"name":"angle","type":"float"}],"name":"rotate_y","outputs":[],"pos":"Vector2(-347.42, 441.525)","sub_type":"void"},{"category":"native","hash":78,"inputs":[{"name":"from","type":"Variant"}],"name":"Cast To","outputs":[{"category":"cast_type","name":"to","out_prop":"InputEventMouseMotion","sub_type":"@dropdown","type":"InputEventMouseMotion"}],"pos":"Vector2(-1635.63, 587.508)","sub_type":"cast"},{"hash":79,"inputs":[{"name":"InputEventMouseMotion","ref":true,"type":"InputEventMouseMotion"}],"name":"get_relative","outputs":[{"name":"","type":"Vector2"}],"pos":"Vector2(-1243.73, 590.924)","sub_type":"func"},{"fantasy_name":"Get Prop -> x","hash":80,"inputs":[{"name":"Vector2","ref":true,"type":"Vector2"}],"name":"x","outputs":[{"name":"x","type":"float"}],"pos":"Vector2(-792.756, 588.174)","sub_type":"get_prop"},{"hash":84,"inputs":[{"name":"Camera3D","ref":true,"type":"Camera3D"},{"name":"angle","type":"float"}],"name":"rotate_x","outputs":[],"pos":"Vector2(-356.219, 726.624)","sub_type":"void"},{"fantasy_name":"Get Prop -> y","hash":85,"inputs":[{"name":"Vector2","ref":true,"type":"Vector2"}],"name":"y","outputs":[{"name":"y","type":"float"}],"pos":"Vector2(-897.966, 916.32)","sub_type":"get_prop"},{"category":"native","exp":"-a * b","hash":701,"inputs":[{"name":"a","type":"Variant"},{"name":"b","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-559.465, 546.839)","sub_type":"expression","type":"expression"},{"category":"native","exp":"-a * b","hash":731,"inputs":[{"name":"a","type":"Variant"},{"name":"b","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-556.859, 880.096)","sub_type":"expression","type":"expression"}],"cnode_name":"_input","id":127,"name":"Input","pos":"Vector2(-326.023, -207.228)"},{"cnode_list":[{"hash":2,"inputs":[],"name":"_process","outputs":[{"name":"delta","type":"float"}],"pos":"Vector2(0, 0)","sub_type":"virtual"}],"cnode_name":"_process","color":"#401d3f","id":128,"name":"Process","param":{"name":"delta","type":"float"},"pos":"Vector2(-217.379, -202.83)"},{"cnode_list":[{"hash":3,"inputs":[],"name":"_physics_process","outputs":[{"name":"delta","type":"float"}],"pos":"Vector2(0, 0)","sub_type":"virtual"},{"hash":7,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"is_on_floor","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-318.122, 189.2)","sub_type":"func"},{"hash":8,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(-10.443, 216.585)","sub_type":"if","type":"if"},{"fantasy_name":"Set Prop -> velocity","hash":9,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"},{"name":"velocity","ref":true,"type":"Vector3"},{"in_prop":0,"name":"x","type":"float"},{"in_prop":0,"name":"y","type":"float"},{"in_prop":0,"name":"z","type":"float"}],"name":"velocity","outputs":[],"pos":"Vector2(955.996, 398.368)","sub_type":"set_prop"},{"hash":11,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"get_gravity","outputs":[{"name":"","type":"Vector3"}],"pos":"Vector2(414.708, 432.668)","sub_type":"func"},{"fantasy_name":"Get Prop -> velocity","hash":15,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"velocity","outputs":[{"name":"velocity","type":"Vector3"},{"name":"x","type":"float"},{"name":"y","type":"float"},{"name":"z","type":"float"}],"pos":"Vector2(380.152, 545.073)","sub_type":"get_prop"},{"fantasy_name":"Input -> get_vector","hash":16,"inputs":[{"in_prop":"left","name":"negative_x","type":"StringName"},{"in_prop":"right","name":"positive_x","type":"StringName"},{"in_prop":"up","name":"negative_y","type":"StringName"},{"in_prop":"down","name":"positive_y","type":"StringName"},{"in_prop":-1,"name":"deadzone","type":"float"}],"name":"Input.get_vector","outputs":[{"name":"","type":"Vector2"}],"pos":"Vector2(-537.998, 884.059)","sub_type":"singleton"},{"fantasy_name":"Get Prop -> transform","hash":18,"inputs":[{"name":"Node3D","ref":true,"type":"Node3D"}],"name":"transform","outputs":[{"name":"transform","type":"Transform3D"},{"name":"basis","type":"Basis"},{"name":"origin","type":"Vector3"}],"pos":"Vector2(-2163.2, 1430.97)","sub_type":"get_prop"},{"category":"mult","hash":21,"inputs":[{"name":"","type":"Variant"},{"name":"","type":"Variant"}],"name":"*","outputs":[{"name":"","type":"Variant"}],"pos":"Vector2(-1673.88, 1498.62)","sub_type":"img","type":"img"},{"category":"native","hash":24,"inputs":[{"name":"from","type":"Variant"}],"name":"Cast To","outputs":[{"category":"cast_type","name":"to","out_prop":"Vector3","sub_type":"@dropdown","type":"Vector3"}],"pos":"Vector2(-1466.72, 1480.75)","sub_type":"cast"},{"hash":25,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"}],"name":"normalized","outputs":[{"name":"","type":"Vector3"}],"pos":"Vector2(-1128.2, 1480.55)","sub_type":"func"},{"hash":26,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(-0.634179, 1501.28)","sub_type":"if","type":"if"},{"category":"native","hash":27,"inputs":[{"name":"from","type":"Variant"}],"name":"Cast To","outputs":[{"category":"cast_type","name":"to","out_prop":"Variant","sub_type":"@dropdown","type":"Variant"}],"pos":"Vector2(-313.071, 1475.83)","sub_type":"cast"},{"fantasy_name":"Set Prop -> velocity","hash":28,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"},{"name":"velocity","ref":true,"type":"Vector3"},{"name":"x","type":"float"},{"in_prop":0,"name":"y","type":"float"},{"name":"z","type":"float"}],"name":"velocity","outputs":[],"pos":"Vector2(-334.326, 1704.98)","sub_type":"set_prop"},{"category":"mult","hash":29,"inputs":[{"name":"","type":"Variant"},{"name":"","type":"Variant"}],"name":"*","outputs":[{"name":"","type":"Variant"}],"pos":"Vector2(-532.675, 1790.75)","sub_type":"img","type":"img"},{"fantasy_name":"Set Prop -> x","hash":32,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"},{"name":"x","type":"float"}],"name":"x","outputs":[],"pos":"Vector2(28.2874, 764.77)","sub_type":"set_prop"},{"fantasy_name":"Set Prop -> z","hash":33,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"},{"name":"z","type":"float"}],"name":"z","outputs":[],"pos":"Vector2(31.544, 1006.07)","sub_type":"set_prop"},{"fantasy_name":"Get Prop -> x","hash":34,"inputs":[{"name":"Vector2","ref":true,"type":"Vector2"}],"name":"x","outputs":[{"name":"x","type":"float"}],"pos":"Vector2(-192.002, 882.089)","sub_type":"get_prop"},{"fantasy_name":"Get Prop -> y","hash":35,"inputs":[{"name":"Vector2","ref":true,"type":"Vector2"}],"name":"y","outputs":[{"name":"y","type":"float"}],"pos":"Vector2(-200.582, 1042.14)","sub_type":"get_prop"},{"fantasy_name":"Get Prop -> z","hash":37,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"}],"name":"z","outputs":[{"name":"z","type":"float"}],"pos":"Vector2(-910.746, 1964.25)","sub_type":"get_prop"},{"category":"mult","hash":38,"inputs":[{"name":"","type":"Variant"},{"name":"","type":"Variant"}],"name":"*","outputs":[{"name":"","type":"Variant"}],"pos":"Vector2(-520.231, 2000.01)","sub_type":"img","type":"img"},{"fantasy_name":"Set Prop -> velocity","hash":39,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"},{"name":"velocity","ref":true,"type":"Vector3"},{"name":"x","type":"float"},{"in_prop":0,"name":"y","type":"float"},{"name":"z","type":"float"}],"name":"velocity","outputs":[],"pos":"Vector2(996.804, 1763.07)","sub_type":"set_prop"},{"fantasy_name":"Get Prop -> velocity","hash":41,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"velocity","outputs":[{"name":"velocity","type":"Vector3"},{"name":"x","type":"float"},{"name":"y","type":"float"},{"name":"z","type":"float"}],"pos":"Vector2(360.231, 1797.38)","sub_type":"get_prop"},{"category":"native","hash":42,"inputs":[{"name":"from","type":"float"},{"in_prop":0,"name":"to","type":"float"},{"name":"delta","type":"float"}],"name":"move_toward","outputs":[{"name":"","type":"float"}],"pos":"Vector2(769.95, 1831.83)","sub_type":"void"},{"category":"native","hash":43,"inputs":[{"name":"from","type":"Variant"}],"name":"Cast To","outputs":[{"category":"cast_type","name":"to","out_prop":"float","sub_type":"@dropdown","type":"float"}],"pos":"Vector2(525.284, 2083.7)","sub_type":"cast"},{"category":"native","hash":45,"inputs":[{"name":"from","type":"float"},{"in_prop":0,"name":"to","type":"float"},{"name":"delta","type":"float"}],"name":"move_toward","outputs":[{"name":"","type":"float"}],"pos":"Vector2(774.322, 2014.1)","sub_type":"void"},{"hash":59,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(13.2428, 2514.32)","sub_type":"if","type":"if"},{"fantasy_name":"Get Prop -> velocity","hash":60,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"velocity","outputs":[{"name":"velocity","type":"Vector3"},{"name":"x","type":"float"},{"name":"y","type":"float"},{"name":"z","type":"float"}],"pos":"Vector2(-696.666, 2488.53)","sub_type":"get_prop"},{"hash":61,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"}],"name":"length","outputs":[{"name":"","type":"float"}],"pos":"Vector2(-376.872, 2487.58)","sub_type":"func"},{"hash":70,"inputs":[{"category":"current_states","in_prop":"idle","name":"state","type":"@dropdown"}],"name":"go_to_event","outputs":[],"pos":"Vector2(-235.909, 2718.23)","sub_type":"self_go_to_void"},{"hash":71,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"move_and_slide","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-3.64612, 2949.85)","sub_type":"func"},{"fantasy_name":"Get Prop -> x","hash":72,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"}],"name":"x","outputs":[{"name":"x","type":"float"}],"pos":"Vector2(-911.079, 1758.05)","sub_type":"get_prop"},{"hash":105,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(9.49948, 3179.17)","sub_type":"if","type":"if"},{"fantasy_name":"Input -> is_action_just_pressed","hash":106,"inputs":[{"category":"action","in_prop":"jump","name":"action","type":"@dropdown"},{"in_prop":false,"name":"exact_match","type":"bool"}],"name":"Input.is_action_just_pressed","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-337.563, 3151.41)","sub_type":"singleton"},{"hash":107,"inputs":[{"category":"current_states","in_prop":"jumping","name":"state","type":"@dropdown"}],"name":"go_to_event","outputs":[],"pos":"Vector2(-204.908, 3392.04)","sub_type":"self_go_to_void"},{"fantasy_name":"Get Prop -> velocity","hash":211,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"velocity","outputs":[{"name":"velocity","type":"Vector3"},{"name":"x","type":"float"},{"name":"y","type":"float"},{"name":"z","type":"float"}],"pos":"Vector2(-874.226, 3849.88)","sub_type":"get_prop"},{"hash":212,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"}],"name":"length","outputs":[{"name":"","type":"float"}],"pos":"Vector2(-501.577, 3848.82)","sub_type":"func"},{"hash":213,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"is_on_floor","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-523.224, 3976.24)","sub_type":"func"},{"fantasy_name":"Set Prop -> transform","hash":222,"inputs":[{"name":"Camera3D","ref":true,"type":"Camera3D"},{"name":"transform","ref":true,"type":"Transform3D"},{"name":"basis","type":"Basis"},{"name":"origin","type":"Vector3"}],"name":"transform","outputs":[],"pos":"Vector2(1.2416, 4218.38)","sub_type":"set_prop"},{"category":"native","fantasy_name":"Debug Value","hash":223,"inputs":[{"name":"content","type":"Variant"}],"name":"","outputs":[],"pos":"Vector2(54.832, 4566.55)","sub_type":"debug_value"},{"hash":244,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(28.0088, 4949.84)","sub_type":"if","type":"if"},{"fantasy_name":"Input -> is_action_just_pressed","hash":245,"inputs":[{"category":"action","in_prop":"l_mouse","name":"action","type":"@dropdown"},{"in_prop":false,"name":"exact_match","type":"bool"}],"name":"Input.is_action_just_pressed","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-351.212, 4922.32)","sub_type":"singleton"},{"hash":247,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(33.088, 5487.41)","sub_type":"if","type":"if"},{"fantasy_name":"Input -> is_action_just_released","hash":248,"inputs":[{"category":"action","in_prop":"l_mouse","name":"action","type":"@dropdown"},{"in_prop":false,"name":"exact_match","type":"bool"}],"name":"Input.is_action_just_released","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-280.613, 5458.99)","sub_type":"singleton"},{"category":"native","hash":250,"inputs":[{"category":"disabled","in_prop":"null","name":"","type":"String"}],"name":"Raw Code","outputs":[{"name":"code","type":"Variant"}],"pos":"Vector2(-406.117, 5713.69)","sub_type":"raw_code"},{"hash":251,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(37.0471, 6071.94)","sub_type":"if","type":"if"},{"category":"native","hash":253,"inputs":[{"name":"from","type":"Variant"}],"name":"Cast To","outputs":[{"category":"cast_type","name":"to","out_prop":"Variant","sub_type":"@dropdown","type":"Variant"}],"pos":"Vector2(-367.048, 6042.07)","sub_type":"cast"},{"fantasy_name":"Get Prop -> global_transform","hash":254,"inputs":[{"name":"RigidBody3D","ref":true,"type":"RigidBody3D"}],"name":"global_transform","outputs":[{"name":"global_transform","type":"Transform3D"},{"name":"basis","type":"Basis"},{"name":"origin","type":"Vector3"}],"pos":"Vector2(-1117.31, 6426.65)","sub_type":"get_prop"},{"fantasy_name":"Get Prop -> global_transform","hash":256,"inputs":[{"name":"Marker3D","ref":true,"type":"Marker3D"}],"name":"global_transform","outputs":[{"name":"global_transform","type":"Transform3D"},{"name":"basis","type":"Basis"},{"name":"origin","type":"Vector3"}],"pos":"Vector2(-1101.12, 6231.01)","sub_type":"get_prop"},{"fantasy_name":"Set Prop -> linear_velocity","hash":257,"inputs":[{"name":"RigidBody3D","ref":true,"type":"RigidBody3D"},{"name":"linear_velocity","ref":true,"type":"Vector3"},{"in_prop":0,"name":"x","type":"float"},{"in_prop":0,"name":"y","type":"float"},{"in_prop":0,"name":"z","type":"float"}],"name":"linear_velocity","outputs":[],"pos":"Vector2(-437.451, 6265.26)","sub_type":"set_prop"},{"fantasy_name":"Input -> is_action_just_pressed","hash":340,"inputs":[{"category":"action","in_prop":"r_mouse","name":"action","type":"@dropdown"},{"in_prop":false,"name":"exact_match","type":"bool"}],"name":"Input.is_action_just_pressed","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-390.407, 6703.48)","sub_type":"singleton"},{"hash":341,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(46.1985, 6728.05)","sub_type":"if","type":"if"},{"hash":342,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(-390.686, 6953.59)","sub_type":"if","type":"if"},{"category":"native","hash":344,"inputs":[{"name":"from","type":"Variant"}],"name":"Cast To","outputs":[{"category":"cast_type","name":"to","out_prop":"Variant","sub_type":"@dropdown","type":"Variant"}],"pos":"Vector2(-628.394, 6925.35)","sub_type":"cast"},{"fantasy_name":"Set Prop -> linear_velocity","hash":345,"inputs":[{"name":"RigidBody3D","ref":true,"type":"RigidBody3D"},{"name":"linear_velocity","ref":true,"type":"Vector3"},{"in_prop":0,"name":"x","type":"float"},{"in_prop":0,"name":"y","type":"float"},{"in_prop":0,"name":"z","type":"float"}],"name":"linear_velocity","outputs":[],"pos":"Vector2(-660.519, 7167.18)","sub_type":"set_prop"},{"fantasy_name":"Get Prop -> global_transform","hash":347,"inputs":[{"name":"Marker3D","ref":true,"type":"Marker3D"}],"name":"global_transform","outputs":[{"name":"global_transform","type":"Transform3D"},{"name":"basis","type":"Basis"},{"name":"origin","type":"Vector3"}],"pos":"Vector2(-1419.68, 7170.66)","sub_type":"get_prop"},{"fantasy_name":"Get Prop -> z","hash":348,"inputs":[{"name":"Basis","ref":true,"type":"Basis"}],"name":"z","outputs":[{"name":"z","type":"Vector3"}],"pos":"Vector2(-1075.01, 7203.47)","sub_type":"get_prop"},{"category":"native","hash":354,"inputs":[{"category":"disabled","in_prop":"null","name":"","type":"String"}],"name":"Raw Code","outputs":[{"name":"code","type":"Variant"}],"pos":"Vector2(-805.839, 7490.12)","sub_type":"raw_code"},{"hash":355,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(44.6837, 7942.85)","sub_type":"if","type":"if"},{"fantasy_name":"Input -> is_action_just_pressed","hash":356,"inputs":[{"category":"action","in_prop":"hide_cursor","name":"action","type":"@dropdown"},{"in_prop":false,"name":"exact_match","type":"bool"}],"name":"Input.is_action_just_pressed","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-258.961, 7914.8)","sub_type":"singleton"},{"fantasy_name":"Input -> set_mouse_mode","hash":357,"inputs":[{"category":"enum_list","data":["set_mouse_mode","MouseMode"],"name":"mode","type":"MouseMode"}],"name":"Input.set_mouse_mode","outputs":[],"pos":"Vector2(122.747, 8508.09)","sub_type":"singleton"},{"category":"native","hash":358,"inputs":[],"name":"Input","outputs":[{"category":"const","name":"","out_prop":"MOUSE_MODE_VISIBLE","sub_type":"@dropdown","type":"MouseMode"}],"pos":"Vector2(-621.718, 8637.64)","sub_type":"const"},{"hash":359,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(-240.453, 8281.97)","sub_type":"if","type":"if"},{"fantasy_name":"Input -> get_mouse_mode","hash":360,"inputs":[],"name":"Input.get_mouse_mode","outputs":[{"name":"","type":"MouseMode"}],"pos":"Vector2(-710.712, 8238.96)","sub_type":"singleton"},{"category":"equal","hash":361,"inputs":[{"name":"","type":"Variant"},{"name":"","type":"Variant"}],"name":"==","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(-422.554, 8274.96)","sub_type":"img","type":"img"},{"category":"native","hash":362,"inputs":[],"name":"Input","outputs":[{"category":"const","name":"","out_prop":"MOUSE_MODE_CAPTURED","sub_type":"@dropdown","type":"MouseMode"}],"pos":"Vector2(-737.728, 8358)","sub_type":"const"},{"fantasy_name":"Input -> set_mouse_mode","hash":363,"inputs":[{"category":"enum_list","data":["set_mouse_mode","MouseMode"],"name":"mode","type":"MouseMode"}],"name":"Input.set_mouse_mode","outputs":[],"pos":"Vector2(-327.736, 8639.56)","sub_type":"singleton"},{"category":"native","exp":"a * b + c","hash":429,"inputs":[{"name":"a","type":"Variant"},{"name":"b","type":"Variant"},{"name":"c","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(754.367, 394.663)","sub_type":"expression","type":"expression"},{"category":"native","hash":462,"inputs":[{"name":"content","type":"Variant"}],"name":"print","outputs":[],"pos":"Vector2(1026.91, 738.505)","sub_type":"void"},{"category":"native","exp":"a == 0","hash":463,"inputs":[{"name":"a","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-179.734, 2446.03)","sub_type":"expression","type":"expression"},{"category":"native","exp":"(a - b) * 8","hash":465,"inputs":[{"name":"a","type":"Variant"},{"name":"b","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-694.942, 6257.63)","sub_type":"expression","type":"expression"},{"category":"native","exp":"a * -40","hash":466,"inputs":[{"name":"a","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-876.904, 7161.21)","sub_type":"expression","type":"expression"},{"category":"native","exp":"((a * b) * float(c)) + d","hash":853,"inputs":[{"name":"a","type":"Variant"},{"name":"b","type":"Variant"},{"name":"c","type":"Variant"},{"name":"d","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-162.296, 3871.38)","sub_type":"expression","type":"expression"},{"hash":1086,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(76.1118, 9172.6)","sub_type":"if","type":"if"},{"category":"native","exp":"a != b && a is RigidBody3D","hash":1087,"inputs":[{"name":"a","type":"Variant"},{"name":"b","type":"Variant"},{"name":"is","type":"Variant"},{"name":"RigidBody3D","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(-210.729, 9106.22)","sub_type":"expression","type":"expression"},{"category":"native","hash":1088,"inputs":[{"category":"disabled","in_prop":"is","name":"","type":"String"}],"name":"Raw Code","outputs":[{"name":"code","type":"Variant"}],"pos":"Vector2(-423.076, 9293.35)","sub_type":"raw_code"},{"category":"native","hash":1089,"inputs":[{"category":"disabled","in_prop":"RigidBody3D","name":"","type":"String"}],"name":"Raw Code","outputs":[{"name":"code","type":"Variant"}],"pos":"Vector2(-484.133, 9410.2)","sub_type":"raw_code"},{"hash":1120,"inputs":[{"name":"RayCast3D","ref":true,"type":"RayCast3D"}],"name":"get_collider","outputs":[{"name":"","type":"Object"}],"pos":"Vector2(-442.978, 9079.57)","sub_type":"func"},{"category":"native","hash":1122,"inputs":[{"category":"disabled","in_prop":"null","name":"","type":"String"}],"name":"Raw Code","outputs":[{"name":"code","type":"Variant"}],"pos":"Vector2(-422.024, 9179.66)","sub_type":"raw_code"},{"hash":1153,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"get_parent","outputs":[{"name":"","type":"Node"}],"pos":"Vector2(-830.965, 9667.14)","sub_type":"func"},{"hash":1154,"inputs":[{"name":"Node","ref":true,"type":"Node"},{"in_prop":"%Crosshair","name":"path","type":"NodePath"}],"name":"get_node","outputs":[{"name":"","type":"Node"}],"pos":"Vector2(-556.702, 9666.99)","sub_type":"func"},{"category":"native","hash":1155,"inputs":[{"name":"from","type":"Variant"}],"name":"Cast To","outputs":[{"category":"cast_type","name":"to","out_prop":"TextureRect","sub_type":"@dropdown","type":"TextureRect"}],"pos":"Vector2(-283.533, 9662.4)","sub_type":"cast"},{"hash":1156,"inputs":[{"name":"TextureRect","ref":true,"type":"TextureRect"},{"name":"texture","type":"Texture2D"}],"name":"set_texture","outputs":[],"pos":"Vector2(24.212, 9833.48)","sub_type":"void"},{"hash":1190,"inputs":[{"name":"TextureRect","ref":true,"type":"TextureRect"},{"name":"texture","type":"Texture2D"}],"name":"set_texture","outputs":[],"pos":"Vector2(487.3, 9653.47)","sub_type":"void"}],"cnode_name":"_physics_process","color":"#1f2950","id":129,"name":"Physics Process","param":{"name":"delta","type":"float"},"pos":"Vector2(-109.872, -202.831)"}],"local_var_items":[{"id":2195835660975,"instances":[{"hash":1220,"id":2221437693859,"pos":"Vector2(-173.917, 395.544)","route_inst_id":2179091998811,"sub_type":"local_var"},{"hash":1221,"id":2222293331918,"pos":"Vector2(391.704, 645.608)","route_inst_id":2179091998811,"sub_type":"local_var"},{"hash":1222,"id":2223148969977,"pos":"Vector2(-10.7905, 165.834)","route_inst_id":2179091998811,"sub_type":"set_local_var"},{"hash":1223,"id":2224105271339,"pos":"Vector2(421.013, 394.042)","route_inst_id":2179091998811,"sub_type":"set_local_var"}],"name":"pos","route_ref":2179091998811,"type":"Vector3"}],"node_counter":1223,"signal_item_list":[],"state_name_counter":6,"states":[{"cnode_list":[{"hash":5,"inputs":[],"name":"enter","outputs":[],"pos":"Vector2(0, 0)","sub_type":"virtual"},{"hash":6,"inputs":[],"name":"update","outputs":[{"name":"delta","type":"float"}],"pos":"Vector2(952.067, 176.395)","sub_type":"virtual"},{"fantasy_name":"Get Prop -> velocity","hash":119,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"velocity","outputs":[{"name":"velocity","type":"Vector3"},{"name":"x","type":"float"},{"name":"y","type":"float"},{"name":"z","type":"float"}],"pos":"Vector2(82.4763, 373.985)","sub_type":"get_prop"},{"hash":120,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"}],"name":"length","outputs":[{"name":"","type":"float"}],"pos":"Vector2(417.908, 372.733)","sub_type":"func"},{"category":"greater","hash":121,"inputs":[{"name":"","type":"float"},{"in_prop":0,"name":"","type":"float"}],"name":">","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(630.682, 409.03)","sub_type":"img","type":"img"},{"hash":123,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(903.533, 416.539)","sub_type":"if","type":"if"},{"hash":124,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(824.681, 625.559)","sub_type":"if","type":"if"},{"hash":125,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"is_on_floor","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(536.811, 598.023)","sub_type":"func"},{"category":"native","hash":140,"inputs":[{"category":"state_transition","in_prop":"walk","name":"name","type":"@dropdown"}],"name":"make_transition","outputs":[],"pos":"Vector2(767.5, 825.107)","sub_type":"func"}],"events":[{"name":"Start","type":"start"}],"id":4,"name":"Idle","pos":"Vector2(-136.683, 62.3078)","route":{"id":"1732214126794","name":"Idle","type":0},"transitions":[{"name":"walk","to_state_id":56}]},{"cnode_list":[{"hash":57,"inputs":[],"name":"enter","outputs":[],"pos":"Vector2(81.7388, -16.4833)","sub_type":"virtual"},{"hash":58,"inputs":[],"name":"update","outputs":[{"name":"delta","type":"float"}],"pos":"Vector2(1221.51, -20.219)","sub_type":"virtual"},{"hash":142,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(1170.72, 218.9)","sub_type":"if","type":"if"},{"fantasy_name":"Input -> is_action_pressed","hash":143,"inputs":[{"category":"action","in_prop":"run","name":"action","type":"@dropdown"},{"in_prop":false,"name":"exact_match","type":"bool"}],"name":"Input.is_action_pressed","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(870.714, 192.746)","sub_type":"singleton"},{"category":"native","hash":147,"inputs":[{"category":"state_transition","in_prop":"run","name":"name","type":"@dropdown"}],"name":"make_transition","outputs":[],"pos":"Vector2(919.945, 477.363)","sub_type":"func"},{"fantasy_name":"Get Prop -> velocity","hash":148,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"velocity","outputs":[{"name":"velocity","type":"Vector3"},{"name":"x","type":"float"},{"name":"y","type":"float"},{"name":"z","type":"float"}],"pos":"Vector2(413.695, 785.582)","sub_type":"get_prop"},{"hash":149,"inputs":[{"name":"Vector3","ref":true,"type":"Vector3"}],"name":"length","outputs":[{"name":"","type":"float"}],"pos":"Vector2(768.028, 783.477)","sub_type":"func"},{"hash":152,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(1173.78, 808.093)","sub_type":"if","type":"if"},{"category":"native","hash":153,"inputs":[{"category":"state_transition","in_prop":"stop","name":"name","type":"@dropdown"}],"name":"make_transition","outputs":[],"pos":"Vector2(1117.58, 1094.77)","sub_type":"func"},{"category":"native","exp":"a == 0","hash":428,"inputs":[{"name":"a","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(980.409, 739.486)","sub_type":"expression","type":"expression"}],"events":[],"id":56,"name":"Walking","pos":"Vector2(17.5081, 103.248)","route":{"id":"17322141268315","name":"Walking","type":0},"transitions":[{"name":"run","to_state_id":144},{"name":"stop","to_state_id":4}]},{"cnode_list":[{"hash":109,"inputs":[],"name":"enter","outputs":[],"pos":"Vector2(0, 0)","sub_type":"virtual"},{"hash":110,"inputs":[],"name":"update","outputs":[{"name":"delta","type":"float"}],"pos":"Vector2(1212.59, 53.6064)","sub_type":"virtual"},{"fantasy_name":"Set Prop -> velocity","hash":111,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"},{"name":"velocity","ref":true,"type":"Vector3"},{"in_prop":0,"name":"x","type":"float"},{"name":"y","type":"float"},{"in_prop":0,"name":"z","type":"float"}],"name":"velocity","outputs":[],"pos":"Vector2(-62.4355, 204.431)","sub_type":"set_prop"},{"hash":113,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(1160.4, 243.173)","sub_type":"if","type":"if"},{"fantasy_name":"Get Prop -> velocity","hash":114,"inputs":[{"name":"CharacterBody3D","ref":true,"type":"CharacterBody3D"}],"name":"velocity","outputs":[{"name":"velocity","type":"Vector3"},{"name":"x","type":"float"},{"name":"y","type":"float"},{"name":"z","type":"float"}],"pos":"Vector2(468.983, 234.586)","sub_type":"get_prop"},{"category":"native","hash":118,"inputs":[{"category":"state_transition","in_prop":"stop","name":"name","type":"@dropdown"}],"name":"make_transition","outputs":[],"pos":"Vector2(951.649, 447.778)","sub_type":"func"},{"category":"native","exp":"a == b","hash":427,"inputs":[{"name":"a","type":"Variant"},{"name":"b","type":"Variant"}],"name":"Expression","outputs":[{"name":"result","type":"Variant"}],"pos":"Vector2(923.244, 179.341)","sub_type":"expression","type":"expression"},{"category":"native","hash":461,"inputs":[],"name":"Vector3","outputs":[{"category":"const","name":"","out_prop":"ZERO","sub_type":"@dropdown","type":"Vector3"}],"pos":"Vector2(739.461, 435.255)","sub_type":"const"}],"events":[],"id":108,"name":"Jumping","pos":"Vector2(-315.631, 24.4122)","route":{"id":"17322141268756","name":"Jumping","type":0},"transitions":[{"name":"stop","to_state_id":4}]},{"cnode_list":[{"hash":145,"inputs":[],"name":"enter","outputs":[],"pos":"Vector2(0, 0)","sub_type":"virtual"},{"hash":146,"inputs":[],"name":"update","outputs":[{"name":"delta","type":"float"}],"pos":"Vector2(942.003, 30.0002)","sub_type":"virtual"},{"hash":155,"inputs":[],"name":"IF","outputs":[],"pos":"Vector2(889.436, 239.423)","sub_type":"if","type":"if"},{"fantasy_name":"Input -> is_action_just_released","hash":156,"inputs":[{"category":"action","in_prop":"run","name":"action","type":"@dropdown"},{"in_prop":false,"name":"exact_match","type":"bool"}],"name":"Input.is_action_just_released","outputs":[{"name":"","type":"bool"}],"pos":"Vector2(551.434, 212.423)","sub_type":"singleton"},{"category":"native","hash":157,"inputs":[{"category":"state_transition","in_prop":"walk","name":"name","type":"@dropdown"}],"name":"make_transition","outputs":[],"pos":"Vector2(834.479, 445.246)","sub_type":"func"}],"events":[],"id":144,"name":"Running","pos":"Vector2(207.18, 139.334)","route":{"id":"17322141269197","name":"Running","type":0},"transitions":[{"name":"walk","to_state_id":56}]}],"type":"CharacterBody3D","var_item_list":[{"export_var":true,"id":2188621457913,"instances":[{"hash":1194,"id":2198419352352,"pos":"Vector2(-2304.24, 1473.14)","route_inst_id":129,"sub_type":"var"},{"hash":1195,"id":2199274990410,"pos":"Vector2(-514.659, 479.272)","route_inst_id":127,"sub_type":"var"}],"name":"head","type":"Node3D"},{"export_var":true,"id":2189745531401,"instances":[{"hash":1196,"id":2200130628469,"pos":"Vector2(-524.081, 764.801)","route_inst_id":127,"sub_type":"var"},{"hash":1197,"id":2200986266528,"pos":"Vector2(-166.637, 4185.54)","route_inst_id":129,"sub_type":"var"}],"name":"camera","type":"Camera3D"},{"export_var":true,"id":2190299179545,"instances":[{"hash":1198,"id":2201841904587,"pos":"Vector2(-1241.76, 6267.55)","route_inst_id":129,"sub_type":"var"},{"hash":1199,"id":2202697542646,"pos":"Vector2(-1557.69, 7206.44)","route_inst_id":129,"sub_type":"var"}],"name":"hand","type":"Marker3D"},{"export_var":true,"id":2190852827688,"instances":[{"hash":1200,"id":2203553180705,"pos":"Vector2(-611.336, 230.454)","route_inst_id":2170401400516,"sub_type":"var"},{"hash":1201,"id":2204408818764,"pos":"Vector2(-579.829, 9116.42)","route_inst_id":129,"sub_type":"var"}],"name":"ray","type":"RayCast3D"},{"export_var":true,"id":2191406475831,"instances":[{"hash":1202,"id":2205264456823,"pos":"Vector2(-721.158, 1919.32)","route_inst_id":129,"sub_type":"var"},{"hash":1203,"id":2206002654370,"pos":"Vector2(361.175, 2120.79)","route_inst_id":129,"sub_type":"var"},{"hash":1204,"id":2206740851916,"in_prop_data":{"0":"5"},"pos":"Vector2(50.9466, 239.559)","route_inst_id":56,"sub_type":"set_var"},{"hash":1205,"id":2208083029248,"in_prop_data":{"0":"10"},"pos":"Vector2(-30.2064, 266.969)","route_inst_id":144,"sub_type":"set_var"}],"name":"SPEED","type":"int"},{"export_var":false,"id":2191960123974,"instances":[{"hash":1206,"id":2209173548339,"pos":"Vector2(-178.917, 799.847)","route_inst_id":129,"sub_type":"var"},{"hash":1207,"id":2210029186397,"pos":"Vector2(-1863.17, 1545.5)","route_inst_id":129,"sub_type":"var"}],"name":"direction","type":"Vector3"},{"export_var":true,"id":2192513772117,"instances":[{"hash":1208,"id":2210884824456,"pos":"Vector2(-764.838, 778.152)","route_inst_id":127,"sub_type":"var"}],"name":"SENSIBILITY","type":"float"},{"export_var":true,"id":2193067420260,"instances":[{"hash":1209,"id":2211623022003,"pos":"Vector2(-289.805, 345.484)","route_inst_id":108,"sub_type":"var"}],"name":"JUMP VELOCITY","type":"float"},{"export_var":false,"id":2193621068403,"instances":[{"hash":1210,"id":2212361219549,"pos":"Vector2(88.8837, 617.667)","route_inst_id":2170401400516,"sub_type":"set_var"},{"hash":1211,"id":2213351075342,"pos":"Vector2(-194.594, 5715.18)","route_inst_id":129,"sub_type":"set_var"},{"hash":1212,"id":2214340931135,"pos":"Vector2(-657.863, 6085.79)","route_inst_id":129,"sub_type":"var"},{"hash":1213,"id":2215196569193,"pos":"Vector2(-1314.95, 6466.21)","route_inst_id":129,"sub_type":"var"},{"hash":1214,"id":2216052207252,"pos":"Vector2(-878.446, 6961.95)","route_inst_id":129,"sub_type":"var"},{"hash":1215,"id":2216907845311,"pos":"Vector2(-625, 7493.12)","route_inst_id":129,"sub_type":"set_var"}],"name":"picked object","type":"RigidBody3D"},{"export_var":false,"id":2194174716546,"instances":[{"hash":1216,"id":2217897701105,"pos":"Vector2(-393.681, 4150.76)","route_inst_id":129,"sub_type":"var"},{"hash":1217,"id":2218635898651,"pos":"Vector2(64.9933, 3911.94)","route_inst_id":129,"sub_type":"set_var"}],"name":"tbop","type":"float"},{"export_var":true,"id":2194728364689,"instances":[{"hash":1218,"id":2219726417742,"pos":"Vector2(290.372, 9724.26)","route_inst_id":129,"sub_type":"var"}],"name":"crosshair def","type":"Texture2D"},{"export_var":true,"id":2195282012832,"instances":[{"hash":1219,"id":2220582055800,"pos":"Vector2(-177.331, 9905.79)","route_inst_id":129,"sub_type":"var"}],"name":"crosshair grab","type":"Texture2D"}]}

extends CharacterBody3D

#
# Variables
@export var head = Node3D.new()
@export var camera = Camera3D.new()
@export var hand = Marker3D.new()
@export var ray = RayCast3D.new()
@export var speed = int()
var direction = Vector3()
@export var sensibility = float()
@export var jump_velocity = float()
var picked_object = RigidBody3D.new()
var tbop = float()
@export var crosshair_def = Texture2D.new()
@export var crosshair_grab = Texture2D.new()

var _STATE_CONTROLLER = HengoStateController.new()

func _init() -> void:
	_STATE_CONTROLLER.set_states({
		idle=Idle.new(self, {
			walk="walking"
		}),
		walking=Walking.new(self, {
			run="running",
			stop="idle"
		}),
		jumping=Jumping.new(self, {
			stop="idle"
		}),
		running=Running.new(self, {
			walk="walking"
		})
	})


func go_to_event(_obj_ref: Node, _state_name: StringName) -> void:
	_obj_ref._STATE_CONTROLLER.change_state(_state_name)


func _ready() -> void:
	if not _STATE_CONTROLLER.current_state:
		EngineDebugger.send_message('hengo:debug_state', [536870912])
		_STATE_CONTROLLER.change_state("idle")


func _process(delta: float) -> void:
	_STATE_CONTROLLER.static_process(delta)



func _physics_process(delta: float) -> void:
	_STATE_CONTROLLER.static_physics_process(delta)
	#hen_dbg#var __hen_id__: float = 0.

	if self.is_on_floor():
		pass
	else:
		self.velocity = self.get_gravity() * delta + self.velocity
		print(self.get_gravity() * delta + self.velocity)
		#hen_dbg#__hen_id__ += 134217728

	self.direction.x = Input.get_vector("left", "right", "up", "down", -1).x
	self.direction.z = Input.get_vector("left", "right", "up", "down", -1).y
	if ((((self.head.transform.basis * self.direction) as Vector3).normalized()) as Variant):

		self.velocity.x = ((self.head.transform.basis * self.direction) as Vector3).normalized().x * self.speed
		self.velocity.z = ((self.head.transform.basis * self.direction) as Vector3).normalized().z * self.speed
		#hen_dbg#__hen_id__ += 8
	else:

		self.velocity.x = move_toward(self.velocity.x, 0, ((self.speed) as float))
		self.velocity.z = move_toward(self.velocity.z, 0, ((self.speed) as float))
		#hen_dbg#__hen_id__ += 33554432

	if self.velocity.length() == 0:
		self.go_to_event(self, "idle")
		#hen_dbg#__hen_id__ += 16
	self.move_and_slide()
	if Input.is_action_just_pressed("jump", false):
		self.go_to_event(self, "jumping")
		#hen_dbg#__hen_id__ += 32
	self.tbop = ((delta * self.velocity.length()) * float(self.is_on_floor())) + self.tbop

	self.camera.transform.origin = self.headpop(self.tbop)
	#hen_dbg#EngineDebugger.send_message('hengo:debug_value', [64, var_to_str(self.tbop)])
	if Input.is_action_just_pressed("l_mouse", false):
		self.pick()
		#hen_dbg#__hen_id__ += 128
	if Input.is_action_just_released("l_mouse", false):
		self.picked_object = null
		#hen_dbg#__hen_id__ += 256
	if ((self.picked_object) as Variant):
		self.picked_object.linear_velocity = (self.hand.global_transform.origin - self.picked_object.global_transform.origin) * 8
		#hen_dbg#__hen_id__ += 512
	if Input.is_action_just_pressed("r_mouse", false):
		if ((self.picked_object) as Variant):
			self.picked_object.linear_velocity = self.hand.global_transform.basis.z * -40
			self.picked_object = null
			#hen_dbg#__hen_id__ += 1024


		#hen_dbg#__hen_id__ += 2048
	if Input.is_action_just_pressed("hide_cursor", false):
		if Input.get_mouse_mode() == Input.MOUSE_MODE_CAPTURED:
			Input.set_mouse_mode(Input.MOUSE_MODE_VISIBLE)
			#hen_dbg#__hen_id__ += 4096
		else:
			Input.set_mouse_mode(Input.MOUSE_MODE_CAPTURED)
			#hen_dbg#__hen_id__ += 8192



		#hen_dbg#__hen_id__ += 16384
	if self.ray.get_collider() != null && self.ray.get_collider() is RigidBody3D:
		((self.get_parent().get_node("%Crosshair")) as TextureRect).set_texture(self.crosshair_grab)
		#hen_dbg#__hen_id__ += 32768
	else:
		((self.get_parent().get_node("%Crosshair")) as TextureRect).set_texture(self.crosshair_def)
		#hen_dbg#__hen_id__ += 65536



	#hen_dbg#__hen_id__ += 131072


	#hen_dbg#__hen_id__ += 262144


	#hen_dbg#__hen_id__ += 524288


	#hen_dbg#__hen_id__ += 1048576


	#hen_dbg#__hen_id__ += 2097152


	#hen_dbg#__hen_id__ += 4194304


	#hen_dbg#__hen_id__ += 8388608


	#hen_dbg#__hen_id__ += 16777216


	#hen_dbg#__hen_id__ += 67108864


	#hen_dbg#__hen_id__ += 268435456
	#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])

func _input(event: InputEvent) -> void:
	#hen_dbg#var __hen_id__: float = 0.

	if event is InputEventMouseMotion:
		self.head.rotate_y(-((event) as InputEventMouseMotion).get_relative().x * self.sensibility)
		self.camera.rotate_x(-((event) as InputEventMouseMotion).get_relative().y * self.sensibility)
		#hen_dbg#__hen_id__ += 2


	#hen_dbg#__hen_id__ += 4
	#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])





#
# Functions
func pick():
	#hen_dbg#var __hen_id__: float = 0.
	if self.ray.get_collider() != null:
		self.picked_object = ((self.ray.get_collider()) as RigidBody3D)
		#hen_dbg#__hen_id__ += 1073741824


	#hen_dbg#__hen_id__ += 2147483648
	#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])
func headpop(time):
	#hen_dbg#var __hen_id__: float = 0.
	var pos

	pos = Vector3.ZERO
	pos.y = sin(time * 2) * 0.08
	pos.x = cos(time * 2 / 2) * 0.08
	#hen_dbg#__hen_id__ += 4294967296
	#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])
	return pos

#

# Signals Callables
class Idle extends HengoState:
	func enter() -> void:
		#hen_dbg#EngineDebugger.send_message('hengo:debug_state', [8589934592])
		pass

	func update(delta) -> void:
		#hen_dbg#var __hen_id__: float = 0.

		if _ref.velocity.length() > 0:
			if _ref.is_on_floor():
				make_transition("walk")
				#hen_dbg#__hen_id__ += 17179869184


			#hen_dbg#__hen_id__ += 34359738368


		#hen_dbg#__hen_id__ += 68719476736
		#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])



class Walking extends HengoState:
	func enter() -> void:
		#hen_dbg#var __hen_id__: float = 0.

		_ref.speed = 5
		#hen_dbg#__hen_id__ += 137438953472
		#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])
		#hen_dbg#EngineDebugger.send_message('hengo:debug_state', [274877906944])

	func update(delta) -> void:
		#hen_dbg#var __hen_id__: float = 0.

		if Input.is_action_pressed("run", false):
			make_transition("run")
			#hen_dbg#__hen_id__ += 549755813888
		if _ref.velocity.length() == 0:
			make_transition("stop")
			#hen_dbg#__hen_id__ += 1099511627776


		#hen_dbg#__hen_id__ += 2199023255552


		#hen_dbg#__hen_id__ += 4398046511104
		#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])



class Jumping extends HengoState:
	func enter() -> void:
		#hen_dbg#var __hen_id__: float = 0.


		_ref.velocity.y = _ref.jump_velocity
		#hen_dbg#__hen_id__ += 8796093022208
		#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])
		#hen_dbg#EngineDebugger.send_message('hengo:debug_state', [17592186044416])

	func update(delta) -> void:
		#hen_dbg#var __hen_id__: float = 0.

		if _ref.velocity == Vector3.ZERO:
			make_transition("stop")
			#hen_dbg#__hen_id__ += 35184372088832


		#hen_dbg#__hen_id__ += 70368744177664
		#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])



class Running extends HengoState:
	func enter() -> void:
		#hen_dbg#var __hen_id__: float = 0.

		_ref.speed = 10
		#hen_dbg#__hen_id__ += 140737488355328
		#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])
		#hen_dbg#EngineDebugger.send_message('hengo:debug_state', [281474976710656])

	func update(delta) -> void:
		#hen_dbg#var __hen_id__: float = 0.

		if Input.is_action_just_released("run", false):
			make_transition("walk")
			#hen_dbg#__hen_id__ += 562949953421312


		#hen_dbg#__hen_id__ += 1125899906842624
		#hen_dbg#EngineDebugger.send_message('hengo:cnode', [__hen_id__])



